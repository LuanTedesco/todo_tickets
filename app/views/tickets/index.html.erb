<style>
  .avatar-small {
    width: 10%;
    height: 10%;
  }
</style>
<div class="p-5">
  <div class="d-flex justify-content-end">
    <%= link_to "New ticket", new_ticket_path, "data-controller": "turbo", class: "btn btn-primary btn-sm" %>
  </div>
  <div class="row pt-3">
    <% columns = { 1 => "Waiting", 2 => "Developing", 3 => "Testing", 4 => "Ready" } %>
    <% columns.each do |column_value, column_name| %>
      <div class="col-md-3">
        <div class="card">
          <div class="card-header text-primary mb-2 text-dark"><%= column_name %></div>
          <div class="card-body">
            <% @tickets.where(column: column_value).each do |ticket| %>
              <a href="<%= edit_ticket_path(ticket) %>" data-controller="turbo" class="text-dark text-decoration-none ticket-card">
                <div class="border p-3 mb-3">
                  <div class="ticket-title">
                    <%= ticket.title %>
                  </div>
                  <hr class="divider">
                  <div class="ticket-details d-flex align-items-center">
                    <% if ticket.avatar_user.present? %>
                      <%= image_tag ticket.avatar_user, alt: 'Avatar', class: 'img-profile rounded-circle avatar-small mr-2' %>
                    <% else %>
                      <%= image_tag 'default-avatar.png', alt: 'Default Avatar', class: 'img-profile rounded-circle avatar-small mr-2' %>
                    <% end %>
                    <p class="mb-0 text-dark"><%= "#{ticket.name_user} #{ticket.created_at.strftime("em %d/%m/%Y Ã s %H:%M")}" %></p>
                  </div>
                  <div class="tags-list mt-2">
                    <%= "Tags: " %>
                    <% ticket.tags.each do |tag| %>
                      <span class="badge badge-primary"><%= tag.name %></span>
                    <% end %>
                  </div>
                </div>
              </a>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
